# This YAML file defines a RoutingPolicy in the AWI system.

# apiVersion: Specifies the API version used for the RoutingPolicy.
apiVersion: awi.app-net-interface.io/v1alpha

# kind: Defines the type of object, here a RoutingPolicy.
kind: RoutingPolicy # A network domain could be a VPC or VRF. Exists behind a router.

# metadata: Contains the metadata for the RoutingPolicy, including name and namespace.
metadata:
  name: "inter-network-domain-policy-1"
  namespace: "Policy to connect networks"

# spec: Specifies the specification of the RoutingPolicy.
spec:
  # metadata (specific to spec): Includes name, description, timestamps, and category.
  metadata:
    name : ""
    description: ""
    creationTimestamp: "2023-08-15T12:34:56Z" # Timestamp generated by the backend.
    modificationTimestamp: "2023-08-15T13:45:67Z" # Timestamp generated by the backend.
    category: "business-critical"

  # routing: Defines the routing configurations for the network path.
  routing:
    networkPath:
      # metadata: Contains metadata for the network path, including name and description.
      metadata:
        name : ""
        description: ""

      # regions: Defines the regional routing configurations, including countries to include or exclude.
      regions:
        countries:
          include: # List of countries to include in the routing path.
          exclude: # List of countries to exclude from the routing path.
    cost-policy:
      bandwidthUsage:
        maxAllowed: 1000 # Maximum allowed bandwidth in Mbps
        costPerUnit: 0.01 # Cost per Mbps per hour
      preferredPaths:
        - path: "low-cost-link"
          costMultiplier: 0.8 # Apply a cost multiplier to prefer this path
        - path: "high-speed-link"
          costMultiplier: 1.2 # Less preferred due to higher cost
      timeOfDayRouting:
        - timeRange: "00:00-06:00"
          path: "low-cost-link"
          description: "Use low-cost link during off-peak hours"
        - timeRange: "06:01-23:59"
          path: "high-speed-link"
          description: "Prefer high-speed link during peak hours, unless cost prohibitive"

