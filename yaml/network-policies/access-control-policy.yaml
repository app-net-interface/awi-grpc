# This YAML file defines an access policy in the AWI system.

# apiVersion: Defines the API version used for the access policy.
apiVersion: awi.cisco.awi/v1

# kind: Specifies the type of object, here an accessPolicy.
kind: accessPolicy 

# metadata: Contains the metadata for the access policy, including name and namespace.
metadata:
  name: access-policy-1
  namespace: "inter-cluster-appsec"

# spec: Specifies the specification of the access policy.
spec:
  # metadata (specific to spec): Includes name, description, priority, timestamps, and labels.
  metadata:
    name : "access-policy-1" # Name that will be used to access policy.
    description: "Policy to connect networks" # Optional: Describe the policy.
    creationTimestamp: "2023-08-15T12:34:56Z" # Generated by backend.
    modificationTimestamp: "2023-08-15T13:45:67Z" # Generated by backend.
    labels:        
      key1: "value1" # Key-value pairs for search.

  # accessPolicy: Defines the access policy - protocol, their respective ports etc.
  accessPolicy:
    protocols:
      - protocol: TCP # Protocol selection from a dropdown of networking protocols.
        port: 8000    # User-defined port value.
      - protocol: HTTP
        port: 8080
      - protocol: TCP
        port: "8000-9000" # Range of ports.

    # action: Specifies the action, chosen from a dropdown. Default is 'deny'.
    action:
      - allow   
      - deny
      - allow-with-logging
      - allow-with-inspection
      - deny-with-logging
      - deny-with-inspection

    # priority: Specifies the priority of the policy. A number between 10 to 100.
    priority: 10
